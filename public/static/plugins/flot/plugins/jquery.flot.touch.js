!function(t){"use strict";function e(t,e){var n,o={twoTouches:!1,currentTapStart:{x:0,y:0},currentTapEnd:{x:0,y:0},prevTap:{x:0,y:0},currentTap:{x:0,y:0},interceptedLongTap:!1,isUnsupportedGesture:!1,prevTapTime:null,tapStartTime:null,longTapTriggerId:null};function a(e){var a=t.getOptions();(a.pan.active||a.zoom.active)&&(function(t){t.touches.length>=3?o.isUnsupportedGesture=!0:o.isUnsupportedGesture=!1}(e),n.dispatchEvent(new CustomEvent("touchevent",{detail:e})),v(e)?r(e,"pinch"):(r(e,"pan"),g(e)||(function(t){var e=(new Date).getTime(),n=e-o.prevTapTime;return n>=0&&n<500&&h(o.prevTap.x,o.prevTap.y,o.currentTap.x,o.currentTap.y)<20?(t.firstTouch=o.prevTap,t.secondTouch=o.currentTap,!0):(o.prevTapTime=e,!1)}(e)&&r(e,"doubleTap"),r(e,"tap"),r(e,"longTap"))))}function r(t,e){switch(e){case"pan":u[t.type](t);break;case"pinch":p[t.type](t);break;case"doubleTap":c.onDoubleTap(t);break;case"longTap":i[t.type](t);break;case"tap":s[t.type](t)}}var u={touchstart:function(t){o.prevTap={x:o.currentTap.x,y:o.currentTap.y},T(t),function(t){o.tapStartTime=(new Date).getTime(),o.interceptedLongTap=!1,o.currentTapStart={x:t.touches[0].pageX,y:t.touches[0].pageY},o.currentTapEnd={x:t.touches[0].pageX,y:t.touches[0].pageY}}(t),n.dispatchEvent(new CustomEvent("panstart",{detail:t}))},touchmove:function(t){d(t),T(t),function(t){o.currentTapEnd={x:t.touches[0].pageX,y:t.touches[0].pageY}}(t),o.isUnsupportedGesture||n.dispatchEvent(new CustomEvent("pandrag",{detail:t}))},touchend:function(t){d(t),g(t)?(n.dispatchEvent(new CustomEvent("pinchend",{detail:t})),n.dispatchEvent(new CustomEvent("panstart",{detail:t}))):function(t){return t.touches&&0===t.touches.length}(t)&&n.dispatchEvent(new CustomEvent("panend",{detail:t}))}},p={touchstart:function(t){n.dispatchEvent(new CustomEvent("pinchstart",{detail:t}))},touchmove:function(t){d(t),o.twoTouches=v(t),o.isUnsupportedGesture||n.dispatchEvent(new CustomEvent("pinchdrag",{detail:t}))},touchend:function(t){d(t)}},c={onDoubleTap:function(t){d(t),n.dispatchEvent(new CustomEvent("doubletap",{detail:t}))}},i={touchstart:function(t){i.waitForLongTap(t)},touchmove:function(t){},touchend:function(t){o.longTapTriggerId&&(clearTimeout(o.longTapTriggerId),o.longTapTriggerId=null)},isLongTap:function(t){return(new Date).getTime()-o.tapStartTime>=1500&&!o.interceptedLongTap&&h(o.currentTapStart.x,o.currentTapStart.y,o.currentTapEnd.x,o.currentTapEnd.y)<20&&(o.interceptedLongTap=!0,!0)},waitForLongTap:function(t){o.longTapTriggerId||(o.longTapTriggerId=setTimeout((function(){i.isLongTap(t)&&n.dispatchEvent(new CustomEvent("longtap",{detail:t})),o.longTapTriggerId=null}),1500))}},s={touchstart:function(t){o.tapStartTime=(new Date).getTime()},touchmove:function(t){},touchend:function(t){s.isTap(t)&&(n.dispatchEvent(new CustomEvent("tap",{detail:t})),d(t))},isTap:function(t){return(new Date).getTime()-o.tapStartTime<=125&&h(o.currentTapStart.x,o.currentTapStart.y,o.currentTapEnd.x,o.currentTapEnd.y)<20}};function T(t){o.currentTap={x:t.touches[0].pageX,y:t.touches[0].pageY}}function d(e){o.isUnsupportedGesture||(e.preventDefault(),t.getOptions().propagateSupportedGesture||e.stopPropagation())}function h(t,e,n,o){return Math.sqrt((t-n)*(t-n)+(e-o)*(e-o))}function g(t){return o.twoTouches&&1===t.touches.length}function v(e){return!!(e.touches&&e.touches.length>=2&&e.touches[0].target===t.getEventHolder()&&e.touches[1].target===t.getEventHolder())}(!0===e.pan.enableTouch||e.zoom.enableTouch)&&(t.hooks.bindEvents.push((function(t,e){n=e[0],e[0].addEventListener("touchstart",a,!1),e[0].addEventListener("touchmove",a,!1),e[0].addEventListener("touchend",a,!1)})),t.hooks.shutdown.push((function(t,e){e[0].removeEventListener("touchstart",a),e[0].removeEventListener("touchmove",a),e[0].removeEventListener("touchend",a),o.longTapTriggerId&&(clearTimeout(o.longTapTriggerId),o.longTapTriggerId=null)})))}jQuery.plot.plugins.push({init:function(t){t.hooks.processOptions.push(e)},options:{propagateSupportedGesture:!1},name:"navigateTouch",version:"0.3"})}();